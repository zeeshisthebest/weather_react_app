<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: services/currentWeatherService.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: services/currentWeatherService.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import http from "./httpService";
import configs from "../config.json";
import utils from "../utils/utils";

const apiEndPointWeather = configs.apiUrl + "/current";
const apiEndPointAstro = configs.apiUrl + "/astronomy";


/**
 * Maps responses from APIs to the Object
 *
 * @param {object} current current weather Object
 * @param {object} location location Object
 * @param {object} astro Astro Object
 * @returns The object containing all these with extra fields removed for state
 */
function mapWeatherToModel({current, location}, {astronomy: {astro}}){
    let currTime = location.localtime.split(" ");

   return {
        weather: {
            uv: current.uv,
            code:  current.condition.code,
            tempC: current.temp_c,
            tempF: current.temp_f,
            feelC: current.feelslike_c,
            feelF: current.feelslike_f,
            visKm: current.vis_km,
            visMi: current.vis_miles,
            windKph: current.wind_kph,
            windMph: current.wind_mph,
            humidity: current.humidity,
            condition:  current.condition.text
        },
        airQuality: current.air_quality,
        location: location,
        astro: {
            sunrise: astro.sunrise,
            sunset: astro.sunset,
            sunUp: currTime[1] > utils.to24(astro.sunrise) &amp;&amp; currTime[1] &lt; utils.to24(astro.sunset)
        }
    }
}

/**
 * Maps responses from API for recent weather
 * @param {Object} weather Weather Object returned by /current API
 * @param {Objet} astro Astro Object returned by /astro API
 * @returns an object with all the data mapped
 */
function mapToRecentModel(weather, {astronomy: {astro}}){
    let currTime = weather.location.localtime.split(" ");
    return {
        condition: weather.current.condition.text,
        code: weather.current.condition.code,
        tempC: weather.current.temp_c,
        tempF: weather.current.temp_f,
        name: weather.location.name,
        country: weather.location.country,
        isSun: currTime[1] > utils.to24(astro.sunrise) &amp;&amp; currTime[1] &lt; utils.to24(astro.sunset)
    }
}


/**
 *
 * Gets current weather from the API
*
 * @async
 * @param {string} location To get weather of
 * @returns promise that will resolve into api response
 * @throws Error thrown by AXIOS
 */
function getCurrentWeather (location) {
    return http.get(apiEndPointWeather, {
        params: {aqi: "yes",q: location}
    });
}

/**
 *
 * Gets Atronomy data from the API
 * @async
 *
 * @param {string} location location
 * @returns promise that will resolve into api response
 * @throws Error thrown by AXIOS
 */
function getAstroData(location){
    return http.get(apiEndPointAstro, {params: {q: location}});
}

const currentWeatherService = {
    getCurrentWeather,
    getAstroData,
    mapWeatherToModel,
    mapToRecentModel
}

export default currentWeatherService;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="DashboardView.html">DashboardView</a></li><li><a href="LeftSideBar.html">LeftSideBar</a></li><li><a href="MainContent.html">MainContent</a></li><li><a href="WeeklyWeather.html">WeeklyWeather</a></li></ul><h3>Global</h3><ul><li><a href="global.html#AirQuality">AirQuality</a></li><li><a href="global.html#AirQualityGraph">AirQualityGraph</a></li><li><a href="global.html#Globe">Globe</a></li><li><a href="global.html#HiLow">HiLow</a></li><li><a href="global.html#InfoCard">InfoCard</a></li><li><a href="global.html#LoadingIcon">LoadingIcon</a></li><li><a href="global.html#LocationAndInfo">LocationAndInfo</a></li><li><a href="global.html#OtherLocationCard">OtherLocationCard</a></li><li><a href="global.html#SearchLocation">SearchLocation</a></li><li><a href="global.html#SkeletonOtherLocationCard">SkeletonOtherLocationCard</a></li><li><a href="global.html#SunriseSunset">SunriseSunset</a></li><li><a href="global.html#Temprature">Temprature</a></li><li><a href="global.html#UnitSelector">UnitSelector</a></li><li><a href="global.html#UseMetricsContext">UseMetricsContext</a></li><li><a href="global.html#UvIndex">UvIndex</a></li><li><a href="global.html#WeatherContext">WeatherContext</a></li><li><a href="global.html#WeatherDecription">WeatherDecription</a></li><li><a href="global.html#WeeklyWeatherGraph">WeeklyWeatherGraph</a></li><li><a href="global.html#WindAndAirIndex">WindAndAirIndex</a></li><li><a href="global.html#WindSpeed">WindSpeed</a></li><li><a href="global.html#codes">codes</a></li><li><a href="global.html#debounce">debounce</a></li><li><a href="global.html#getAQI">getAQI</a></li><li><a href="global.html#getAirQualityRemark">getAirQualityRemark</a></li><li><a href="global.html#getAstroData">getAstroData</a></li><li><a href="global.html#getCurrentWeather">getCurrentWeather</a></li><li><a href="global.html#getIp">getIp</a></li><li><a href="global.html#getIs24">getIs24</a></li><li><a href="global.html#getLocation">getLocation</a></li><li><a href="global.html#getLocationFromIp">getLocationFromIp</a></li><li><a href="global.html#getMetricPreference">getMetricPreference</a></li><li><a href="global.html#getRecentSearched">getRecentSearched</a></li><li><a href="global.html#getUnit">getUnit</a></li><li><a href="global.html#getWeatherBg">getWeatherBg</a></li><li><a href="global.html#getWeatherIcons">getWeatherIcons</a></li><li><a href="global.html#getWeekDays">getWeekDays</a></li><li><a href="global.html#getWeeklyWeather">getWeeklyWeather</a></li><li><a href="global.html#lineChartOptions">lineChartOptions</a></li><li><a href="global.html#localStorageService">localStorageService</a></li><li><a href="global.html#mapToRecentModel">mapToRecentModel</a></li><li><a href="global.html#mapWeatherToModel">mapWeatherToModel</a></li><li><a href="global.html#mapWeeklyWeatherToModel">mapWeeklyWeatherToModel</a></li><li><a href="global.html#search">search</a></li><li><a href="global.html#setIs24">setIs24</a></li><li><a href="global.html#setLocation">setLocation</a></li><li><a href="global.html#setMetricPreference">setMetricPreference</a></li><li><a href="global.html#setRecentSearched">setRecentSearched</a></li><li><a href="global.html#to24">to24</a></li><li><a href="global.html#withinRange">withinRange</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.3</a> on Thu Oct 17 2024 20:55:15 GMT+0500 (Pakistan Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
